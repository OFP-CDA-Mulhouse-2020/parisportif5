@startuml parisportif5

'plantuml
'Relations :
    User --|> Account
    'User "1" -- "1" BillingHistory
    'BillingHistory "1" o-- "0..*" Billing
    BetCategory "1" <-- "0..*" Bet
    User -- Bet

    BetCategory "0..*" <--o "0..*" AbstractSport
    AbstractSport "1..*" <--* "0..*" Competition
    Country "1..*" <--* "0..*" Competition
    Competition "1" o-- "0..*" Event
    Event "1" o-- "0..*" AbstractRun
    AbstractRun "0..*" o--> "1" Location
    Team "1" o-- "0..*" AbstractScore
    AbstractRun "0..1" *--> "1..*" Team
    Team "1" o-- "0..*" Member
    Country "1" <--* "0..1" Team
    Competition "0..1" o--> "0..*" Team
    Event "0..1" o--> "0..*" Team
    Member "0..1" -- "0..*" AbstractScore
    AbstractSport "0..1" --> "1" Country
    Event "0..1" *--> "1..*" AbstractSport
    Team "0..*" --> "1" AbstractSport
    Member "0..*" *--> "1..*" AbstractSport
    Member "0..*" *--> "1..*" Country
    Location "0..*" --> "1" Country
    Member "0..*" <--o "0..*" AbstractRun

    AbstractRun <|-- Race
    AbstractRun <|-- Fixture
    BetTargetInterface <|.. Competition
    BetTargetInterface <|.. Event
    BetTargetInterface <|.. AbstractRun
    BetTargetInterface <|.. Team
    BetTargetInterface <|.. Member
    PointScoreInterface <|.. PointScore
    TimeScoreInterface <|.. TimeScore
    TimeScore --|> AbstractScore
    PointScore --|> AbstractScore
    TimeScore ..|> ScoreInterface
    PointScore ..|> ScoreInterface

    Football ..|> SportInterface
    Football ..|> SportInterface
    Handball ..|> SportInterface
    Tennis ..|> SportInterface
    FormulaOne  ..|> SportInterface
    TableTennis ..|> SportInterface
    Football --|> AbstractSport
    Handball --|> AbstractSport
    Tennis --|> AbstractSport
    FormulaOne --|> AbstractSport
    TableTennis --|> AbstractSport
    Football ..|> CollectiveSportInterface
    Handball ..|> CollectiveSportInterface
    Tennis ..|> IndividualSportInterface
    FormulaOne  ..|> IndividualSportInterface
    TableTennis ..|> CollectiveSportInterface
    TableTennis ..|> IndividualSportInterface
    Fixture ..|> RunInterface
    Race ..|> RunInterface
'Définitions des classes :
    'interface de généralisation pour les classes autorisé à être parié
    interface BetTargetInterface {
        +getOdds() : float
    }
    'Compte (sert à ce connecter)
    class Account {
        -identifier : int
        -validation : bool
        -password : string
        -emailAddress : string
        -status : bool
        +isValidate() : bool
    }
    'Utilisateur avec un compte
    class User {
        -identifier : int
        -name : string
        -LastName : string
        -billingAddress : string
        -billingPostCode : string
        -billingCountry : string
        -birthDate : DateTime
        -wallet : float
        -cart : Bet[*]
        '-billingsHistory : BillingHistory
        -betsHistory : Bet[*]
    }
    note left : Propriété mobile pour notification
    'Factures
    class Billing {
        -identifier : int
        -orderNumber  : int
        -amount : float
        -currency : string
        -user : User
        -bet : Bet
    }
    'Historique des factures
    class BillingHistory {
        -identifier
        -user : User
        -billings : Billing[*]
    }
    'Un paris
    class Bet {
        -identifier : int
        -amount : float
        -state : BetState
        -user : User
        -category : BetCategory
        -odds : float
        -items : BetTargetInterface
    }
    'Catégorie de paris (ex: Paris sur la victoire du favoris)
    class BetCategory {
        -identifier : int
        -name : string
        -description : string
        -sport : SportInterface
    }
    'Lieu de la rencontre/course
    class Location {
        -identifier : int
        -datetime : DateTime
        -timezoneLocal : DateTimeZone
        -country : Country
        -run : Run
    }
    'Sport pratiqué
    abstract class AbstractSport {
        #identifier : int
        #nameTranslate : string
        #competitorNumber : int
        #statutes : MemberStatus[*]
        #roles : MemberRole[*]
        #resultsType : ResultType[*]
        #country : Country
    }
    interface SportInterface {
        +getNameTranslate() : string
        +getClassName() : string
    }
    interface IndividualSportInterface {
        +isIndividual() : bool
    }
    interface CollectiveSportInterface {
        +isCollective() : bool
    }
    class Football {
        +getNameTranslate() : string
        +getClassName() : string
        +isCollective() : bool
    }
    class Handball {
        +getNameTranslate() : string
        +getClassName() : string
        +isCollective() : bool
    }
    class Tennis {
        +getNameTranslate() : string
        +getClassName() : string
        +isIndividual() : bool
    }
    class FormulaOne {
        +getNameTranslate() : string
        +getClassName() : string
        +isIndividual() : bool
    }
    class TableTennis {
        +getNameTranslate() : string
        +getClassName() : string
        +isCollective() : bool
        +isIndividual() : bool
    }
    'Pays du lieu de la rencontre/course
    class Country {
        -identifier : int
        -dateFormat : string
        -timeFormat : string
        -summerTimeOffset : int
        -TimeZones : DateTimeZone[*]
        +getIdentifier() : int
        +getDefaultTimeZone() : DateTimeZone
        +getTimeZone(in string timezone) : DateTimeZone
        +hasSummerTime() : bool
        +getDateFormat() : string
        +getTimeFormat() : string
        +getDateTimeFormat() : string
    }
    'Compétition (JO, Ligue des Champions, F1 Championnat du monde)
    class Competition {
        -identifier : int
        -name : string
        -startDate : DateTime
        -endDate : DateTime
        -odds : float
        -sports : Sport[*]
        -teams : Team[*]
        -events : Event[*]
        -countries : Country[*]
        -winner : Team
    }
    'Événement de la compétition (poul de qualification, Circuit F1 de france)
    class Event {
        -identifier : int
        -name : string
        -startDate : DateTime
        -endDate : DateTime
        -odds : float
        -competition : Competition
        -teams : Team[*]
        -runs : RunInterface[*]
        '-results : Result[*]
    }
    'Classe mère global : Un match, une rencontre, une course
    abstract class AbstractRun {
        #identifier : int
        #name : string
        #startDate : DateTime
        #endDate : DateTime
        #odds : float
        #location : Location
        #event : Event
        #teams : Team[*]
        #members : Member[*]
        #result : ResultType
    }
    note left: Extension possible en plus de Team : "Competitor" 
    'interface
    interface RunInterface
    'Course
    class Race {
        -identifier : int
    }
    'Rencontre
    class Fixture {
        -identifier : int
    }
    'interface pour Score en temps
    interface TimeScoreInterface {
        +getTime() : float
    }
    'interface pour Score en points
    interface PointScoreInterface {
        +getPoint() : int
    }
    'interface de généralisation pour un Score
    interface ScoreInterface {
        +getScore() : float
    }
    'Type de Score (par période, par match, par course, par saison pour team, par épreuve pour team)
    'class ScoreType
    'Score de l'équipe ou du membre de l'équipe
    abstract class AbstractScore {
        #identifier : int
        #type : ScoreType
    }
    'Score en temps
    class TimeScore {
        #value : float
        +getTime() : float
        +getScore() : float
    }
    'Score en points
    class PointScore {
        #value : int
        +getPoint() : int
        +getScore() : float
    }
    'Joueur ou sportif ou pilote
    class Member {
        -identifier : int
        -name : string
        -firstName : string
        -runIdentification : string
        -status : MemberStatus
        -result : ResultType
        -role : MemberRole
        -odds : float
        -sports : Sport[*]
        -teams : Team[*]
        -scores : ScoreInterface[*]
        -countries : Country[*]
    }
    'Équipes qui participe à une rencontre, à une course
    class Team {
        -identifier : int
        -name : string
        -result : ResultType
        -odds : float
        -country : Country
        -sport : Sport
        -scores : ScoreInterface[*]
        -members : Member[*]
    }
    note right: Peut implémenter une interface ContextantInterface

@enduml